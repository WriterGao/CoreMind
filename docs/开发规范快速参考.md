# CoreMind 开发规范快速参考

## 常用命令

### 代码格式化
```bash
# 格式化所有代码
make format

# 只格式化Python
cd backend && black app/ && isort app/

# 只格式化TypeScript
cd frontend && npm run lint -- --fix
```

### 代码检查
```bash
# 检查所有代码
make lint

# 只检查Python
cd backend && black --check app/ && flake8 app/

# 只检查TypeScript
cd frontend && npm run lint
```

### 提交前检查
```bash
# 运行所有检查（格式化、检查、测试）
make pre-commit
```

## 命名规范速查

### Python
- **文件/目录**：`user_model.py`、`llm_service.py`
- **类名**：`User`、`LLMService`（大驼峰）
- **函数/变量**：`get_user()`、`user_id`（小写下划线）
- **常量**：`MAX_RETRY_COUNT`（大写下划线）
- **表名**：`users`、`llm_configs`（复数，小写下划线）

### TypeScript
- **文件/组件**：`Chat.tsx`、`LLMConfig.tsx`（大驼峰）
- **变量/函数**：`userName`、`loadItems()`（小驼峰）
- **接口/类型**：`User`、`ApiResponse<T>`（大驼峰）
- **常量**：`API_BASE_URL`（大写下划线）

## API设计速查

### RESTful端点
```
GET    /api/v1/resource          # 列表
GET    /api/v1/resource/{id}     # 详情
POST   /api/v1/resource          # 创建
PUT    /api/v1/resource/{id}     # 更新
DELETE /api/v1/resource/{id}     # 删除
```

### 状态码
- `200` - 成功
- `201` - 创建成功
- `204` - 删除成功（无内容）
- `400` - 请求错误
- `401` - 未认证
- `403` - 无权限
- `404` - 不存在
- `422` - 验证失败
- `500` - 服务器错误

## Git提交格式

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Type类型：**
- `feat` - 新功能
- `fix` - Bug修复
- `docs` - 文档
- `style` - 格式
- `refactor` - 重构
- `test` - 测试
- `chore` - 工具/构建

**示例：**
```
feat(api): 添加LLM配置管理API

- 实现CRUD操作
- 支持多种提供商

Closes #123
```

## 代码模板

### Python API端点
```python
@router.post("/items", response_model=ItemResponse)
async def create_item(
    item_data: CreateItemRequest,
    current_user: dict = Depends(get_current_user),
    db: AsyncSession = Depends(get_db)
) -> ItemResponse:
    """创建项目"""
    try:
        item = Item(**item_data.dict())
        db.add(item)
        await db.commit()
        return ItemResponse.from_orm(item)
    except Exception as e:
        logger.error(f"创建失败: {e}")
        raise HTTPException(status_code=500, detail="创建失败")
```

### TypeScript组件
```typescript
export default function ItemList() {
  const [items, setItems] = useState<Item[]>([])
  const [loading, setLoading] = useState(false)

  useEffect(() => {
    loadItems()
  }, [])

  const loadItems = async () => {
    try {
      setLoading(true)
      const data = await api.get<Item[]>('/items')
      setItems(data)
    } catch (error) {
      message.error('加载失败')
    } finally {
      setLoading(false)
    }
  }

  return <div>{/* 组件内容 */}</div>
}
```

## 检查清单

提交代码前确认：
- [ ] `make format` - 代码已格式化
- [ ] `make lint` - 代码检查通过
- [ ] `make test` - 测试通过
- [ ] 代码有注释
- [ ] 文档已更新
- [ ] Git提交信息规范

## 快速链接

- [完整开发规范](./开发规范.md)
- [系统设计文档](./系统设计文档.md)
- [API文档](./API文档.md)
- [部署指南](./部署指南.md)

