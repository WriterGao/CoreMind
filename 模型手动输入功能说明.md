# 模型手动输入功能说明

## ✅ 功能已实现

### 新增功能
**模型名称支持手动输入**

现在在LLM配置页面，模型名称字段支持：
1. ✅ **从下拉列表选择** - 预设的常用模型
2. ✅ **手动输入** - 任意模型名称
3. ✅ **智能搜索** - 输入时自动过滤匹配的模型

---

## 🎯 使用方法

### 方式1：从列表选择（推荐）
1. 访问 LLM配置页面
2. 点击"添加配置"
3. 选择提供商
4. 在"模型名称"输入框中：
   - 点击输入框，显示预设模型列表
   - 点击选择一个模型

### 方式2：手动输入（灵活）
1. 选择提供商后
2. 在"模型名称"输入框中：
   - 直接输入模型名称（如：`gpt-4-1106-preview`）
   - 不需要从列表中选择
   - 支持任意模型名称

### 方式3：搜索+选择（便捷）
1. 在"模型名称"输入框中输入关键词（如：`turbo`）
2. 自动过滤显示匹配的模型
3. 点击选择

---

## 📋 扩充的模型列表

### OpenAI
现在支持 **10个模型**：
```
✅ gpt-4o              (最新旗舰模型)
✅ gpt-4o-mini         (小型高效模型)
✅ gpt-4-turbo         (Turbo版本)
✅ gpt-4-turbo-preview (预览版)
✅ gpt-4               (标准版)
✅ gpt-4-32k           (长上下文)
✅ gpt-3.5-turbo       (性价比高)
✅ gpt-3.5-turbo-16k   (长上下文)
✅ o1-preview          (推理模型预览)
✅ o1-mini             (小型推理模型)
```

### DeepSeek
现在支持 **3个模型**：
```
✅ deepseek-chat       (对话模型)
✅ deepseek-coder      (代码模型)
✅ deepseek-reasoner   (推理模型)
```

### 阿里云通义千问
现在支持 **6个模型**：
```
✅ qwen-max                (最强模型)
✅ qwen-max-longcontext    (长上下文)
✅ qwen-plus               (平衡版)
✅ qwen-turbo              (快速版)
✅ qwen-vl-plus            (视觉模型)
✅ qwen-vl-max             (视觉模型Pro)
```

### 智谱AI (ChatGLM)
现在支持 **7个模型**：
```
✅ glm-4-plus     (Plus版本)
✅ glm-4-0520     (特定版本)
✅ glm-4          (标准版)
✅ glm-4-air      (轻量版)
✅ glm-4-airx     (Air扩展版)
✅ glm-4-flash    (快速版)
✅ glm-3-turbo    (3代Turbo)
```

### Anthropic (Claude)
现在支持 **6个模型**：
```
✅ claude-3-5-sonnet-20241022  (最新Sonnet 3.5)
✅ claude-3-5-sonnet-20240620  (Sonnet 3.5)
✅ claude-3-5-haiku-20241022   (最新Haiku 3.5)
✅ claude-3-opus-20240229      (Opus 3)
✅ claude-3-sonnet-20240229    (Sonnet 3)
✅ claude-3-haiku-20240307     (Haiku 3)
```

### Google Gemini
现在支持 **6个模型**：
```
✅ gemini-2.0-flash-exp  (2.0 实验版)
✅ gemini-1.5-pro        (1.5 Pro)
✅ gemini-1.5-flash      (1.5 Flash)
✅ gemini-1.5-flash-8b   (1.5 Flash 8B)
✅ gemini-pro            (标准版)
✅ gemini-pro-vision     (视觉版)
```

### Ollama (本地部署)
现在支持 **12个模型**：
```
✅ llama3.3              (最新Llama)
✅ llama3.2              (Llama 3.2)
✅ llama3.1              (Llama 3.1)
✅ llama2                (Llama 2)
✅ mistral               (Mistral)
✅ mixtral               (Mixtral)
✅ qwen2.5               (通义千问2.5)
✅ qwen                  (通义千问)
✅ codellama             (代码Llama)
✅ deepseek-coder-v2     (DeepSeek Coder V2)
✅ phi3                  (微软Phi-3)
✅ gemma2                (Google Gemma 2)
```

### 其他提供商
- **Azure OpenAI**: 3个模型
- **百度文心一言**: 3个模型
- **月之暗面 (Kimi)**: 3个模型
- **自定义**: 支持任意模型

---

## 💡 使用场景

### 场景1：使用预设模型（最简单）
```
1. 选择提供商：OpenAI
2. 点击模型输入框
3. 选择：gpt-4o
4. 保存
```

### 场景2：使用新发布的模型
```
1. 选择提供商：OpenAI
2. 在模型输入框直接输入：gpt-4-turbo-2024-04-09
3. 保存
```
✅ 即使列表中没有，也可以手动输入！

### 场景3：使用测试版模型
```
1. 选择提供商：Anthropic
2. 直接输入：claude-3-opus-20240301
3. 保存
```

### 场景4：使用本地Ollama模型
```
1. 选择提供商：Ollama
2. 可以从列表选择，或输入自己下载的模型名
3. 例如输入：llama3.3:70b-instruct-q4_K_M
4. 保存
```

---

## 🎨 界面改进

### 之前（只能选择）
```
┌─────────────────────────────────┐
│ 模型名称 *                       │
│ ┌─────────────────────────────┐ │
│ │ 请选择模型              ▼  │ │
│ └─────────────────────────────┘ │
│   gpt-4                          │
│   gpt-4-turbo                    │
│   ...                            │
└─────────────────────────────────┘
❌ 列表中没有的模型无法使用
```

### 现在（可输入可选择）
```
┌─────────────────────────────────┐
│ 模型名称 *                       │
│ ┌─────────────────────────────┐ │
│ │ gpt-4-1106-preview         │ │ ← 可以直接输入！
│ └─────────────────────────────┘ │
│   gpt-4o                         │
│   gpt-4o-mini                    │
│   gpt-4-turbo                    │
│   gpt-4-turbo-preview            │
│   ...                            │
│                                  │
│ 💡 可以从列表选择或手动输入模型名称 │
└─────────────────────────────────┘
✅ 支持任意模型名称！
```

---

## 🔧 技术实现

### 前端改进
**使用 AutoComplete 组件替代 Select：**

**修改前：**
```tsx
<Select placeholder="请选择模型">
  {provider.models.map((model) => (
    <Select.Option value={model}>{model}</Select.Option>
  ))}
</Select>
```
❌ 只能选择，不能输入

**修改后：**
```tsx
<AutoComplete
  placeholder="请选择或输入模型名称（如：gpt-4, gpt-4-turbo）"
  options={provider.models.map((model) => ({
    value: model,
    label: model,
  }))}
  filterOption={(inputValue, option) =>
    option!.value.toUpperCase().indexOf(inputValue.toUpperCase()) !== -1
  }
/>
```
✅ 既能选择，又能输入

**新增提示信息：**
```tsx
extra="可以从列表选择或手动输入模型名称"
```

### 后端扩展
- 扩充了所有提供商的模型列表
- 添加了最新发布的模型
- 模型列表仅作为推荐，后端不做验证

---

## 📊 支持的模型总数

| 提供商 | 之前 | 现在 | 增加 |
|--------|------|------|------|
| OpenAI | 4 | 10 | +6 |
| DeepSeek | 2 | 3 | +1 |
| 阿里通义 | 3 | 6 | +3 |
| 智谱AI | 2 | 7 | +5 |
| Claude | 3 | 6 | +3 |
| Gemini | 2 | 6 | +4 |
| Ollama | 4 | 12 | +8 |
| **总计** | **20** | **50** | **+30** |

**模型数量增加 150%！**

---

## 🚀 立即测试

### 1. 刷新浏览器
```
按 Ctrl/Cmd + R
```

### 2. 访问LLM配置
```
http://localhost:5173/llm-configs
```

### 3. 测试手动输入
1. 点击"添加配置"
2. 选择"OpenAI (GPT-3.5/4)"
3. 在模型名称输入框：
   - **方式A**: 点击查看预设列表（现在有10个模型）
   - **方式B**: 直接输入 `gpt-4-vision-preview`
   - **方式C**: 输入 `turbo` 搜索相关模型
4. 填写其他信息
5. 保存

✅ 都能成功保存！

---

## 💡 常见问题

### Q1: 手动输入的模型名称会被验证吗？
**A**: 不会。系统允许输入任意模型名称，因为：
- 新模型不断发布
- 不同提供商可能有自定义名称
- 本地部署的模型名称各不相同

### Q2: 如果输入了错误的模型名称会怎样？
**A**: 
- 配置能正常保存
- 使用时如果模型不存在，API会返回错误
- 建议参考提供商官方文档确认模型名称

### Q3: 预设列表会更新吗？
**A**: 
- 会的！我们会定期更新预设列表
- 即使列表未更新，您也可以手动输入新模型

### Q4: 支持模型别名吗？
**A**: 
- 取决于提供商的API
- 例如OpenAI的 `gpt-4` 会自动映射到最新版本
- 具体请参考提供商文档

---

## 📝 最佳实践

### 1. 使用预设模型（推荐）
✅ 列表中的模型都是经过验证的常用模型
✅ 选择即用，无需记忆模型名称

### 2. 参考官方文档
使用手动输入时，建议查看提供商官方文档：
- OpenAI: https://platform.openai.com/docs/models
- Anthropic: https://docs.anthropic.com/claude/docs/models-overview
- 阿里云: https://help.aliyun.com/zh/dashscope/

### 3. 测试新模型
在生产环境使用前，建议先测试：
1. 创建测试配置
2. 发送测试请求
3. 确认模型可用后再正式使用

---

## ✅ 功能清单

- [x] 模型名称支持手动输入
- [x] 保留预设模型列表
- [x] 支持搜索过滤
- [x] 扩充OpenAI模型（+6个）
- [x] 扩充DeepSeek模型（+1个）
- [x] 扩充阿里通义模型（+3个）
- [x] 扩充智谱AI模型（+5个）
- [x] 扩充Claude模型（+3个）
- [x] 扩充Gemini模型（+4个）
- [x] 扩充Ollama模型（+8个）
- [x] 添加输入提示信息
- [x] 后端服务已重启
- [x] 前端服务已重启

---

## 🎉 总结

现在LLM配置更加灵活：
- ✅ **50+预设模型** - 覆盖主流提供商
- ✅ **手动输入支持** - 使用任意模型
- ✅ **智能搜索** - 快速找到需要的模型
- ✅ **最新模型** - 包含2024最新发布的模型

**开始使用吧！** 🚀

